<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-01-24">
<meta name="description" content="Using the GitHub API and {ellmer} to remember what I did this week.">

<title>Remembering what I did this week with LLMs – Garrick Aden-Buie</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.counter.dev/script.js" data-id="10454114-dc3f-4c23-a4da-87e7f2c7c58d" data-utcoffset="-4"></script>


<link rel="stylesheet" href="../../_assets/panelset-extras.css">
<meta property="og:title" content="Remembering what I did this week with LLMs – Garrick Aden-Buie">
<meta property="og:description" content="Using the GitHub API and {ellmer} to remember what I did this week.">
<meta property="og:site_name" content="Garrick Aden-Buie">
<meta name="twitter:title" content="Remembering what I did this week with LLMs – Garrick Aden-Buie">
<meta name="twitter:description" content="Using the GitHub API and {ellmer} to remember what I did this week.">
<meta name="twitter:image" content="https://www.garrickadenbuie.com/blog/llm-work-summary/social-default.png">
<meta name="twitter:creator" content="@grrrck">
<meta name="twitter:site" content="@grrrck">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">garrick</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../project/index.html"> 
<span class="menu-text">projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../talk/index.html"> 
<span class="menu-text">talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about/index.html"> 
<span class="menu-text">about</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/gadenbuie"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/@grrrck"> <i class="bi bi-mastodon" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Remembering what I did this week with LLMs</h1>
                  <div>
        <div class="description">
          <p>Using the GitHub API and <code>{ellmer}</code> to remember what I did this week.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">Personal Data</div>
                <div class="quarto-category">Productivity</div>
                <div class="quarto-category">GitHub</div>
                <div class="quarto-category">ellmer</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 24, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-object-impermanence-of-work" id="toc-the-object-impermanence-of-work" class="nav-link active" data-scroll-target="#the-object-impermanence-of-work">The object impermanence of work</a></li>
  <li><a href="#what-did-i-even-do-this-week" id="toc-what-did-i-even-do-this-week" class="nav-link" data-scroll-target="#what-did-i-even-do-this-week">What did I even do this week?</a></li>
  <li><a href="#hiring-my-executive-robot-assistant" id="toc-hiring-my-executive-robot-assistant" class="nav-link" data-scroll-target="#hiring-my-executive-robot-assistant">Hiring my executive robot assistant</a>
  <ul class="collapse">
  <li><a href="#system-prompt" id="toc-system-prompt" class="nav-link" data-scroll-target="#system-prompt">System prompt</a></li>
  <li><a href="#work-context" id="toc-work-context" class="nav-link" data-scroll-target="#work-context">Work context</a></li>
  <li><a href="#the-user-prompt" id="toc-the-user-prompt" class="nav-link" data-scroll-target="#the-user-prompt">The user prompt</a></li>
  </ul></li>
  <li><a href="#the-final-result" id="toc-the-final-result" class="nav-link" data-scroll-target="#the-final-result">The final result</a></li>
  <li><a href="#using-local-llms" id="toc-using-local-llms" class="nav-link" data-scroll-target="#using-local-llms">Using local LLMS</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/gadenbuie/garrickadenbuie-com/blob/main/blog/llm-work-summary/index.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/gadenbuie/garrickadenbuie-com/edit/main/blog/llm-work-summary/index.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/gadenbuie/garrickadenbuie-com/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="the-object-impermanence-of-work" class="level2">
<h2 class="anchored" data-anchor-id="the-object-impermanence-of-work">The object impermanence of work</h2>
<p>My least favorite meetings are status meetings. I love seeing the people I work with and hearing about what they’ve been up to, but I hate trying to remember what the hell I’ve been working on.</p>
<p>When I joined the Shiny team, we’d have a short daily status meeting and you’d think it’d be easy to remember what I did in the last 24 hours. But apparently, that’s not how I live my life. I’m sure I thought of things to say, but every daily update I felt like I’d say some variation of “I did a bunch of stuff and now I’m… doing more stuff”.</p>
<p>My perception of how I work is in short bursts of deep focus time punctuated by many short breaks to answer questions on Slack or GitHub issues or <a href="https://discord.gg/yMGCamUMnS">the Shiny Discord server</a> or <a href="https://community.posit.co">Posit Community</a> or any of the many other places that people post questions and sometimes code.</p>
<p>Between the deep focus work, I usually maintain one thread of maintenance tasks, like babysitting a CI process, or making a small change to fix a bug, or <a href="https://bsky.app/profile/grrrck.xyz/post/3lgdolbiqis25">turning screenshots into reproducible bug reports</a>. And I also tend to have another more speculative thread going for learning something new or playing with a new idea.</p>
<p>I don’t recommend my way of working to others. Whole books have been written just to say “don’t work like this”! Software engineers rail against <a href="https://contextkeeper.io/blog/the-real-cost-of-an-interruption-and-context-switching/">context switching</a>, <a href="https://blog.stackblitz.com/posts/flow-state/">interruptions</a>, and <a href="https://www.apa.org/topics/research/multitasking">multitasking</a>.</p>
<p>I compensate for the known perils of my work style in two ways. First, even if I do a lot of different things throughout the day, there’s generally only ever <em>one task</em> that I’m working on at any given moment. That task gets all the focus.</p>
<p>Second, I try to leave context behind in my work. If I’m working on a pull request, that means submitting the PR with enough description that I could <a href="https://bsky.app/profile/grrrck.xyz/post/3lfslcgnoh225">forget that I even wrote the PR</a> and most of what I’d need to pick it back up is there in the description or comments. If I had some code in front of me when I found the issue or was testing the PR, that code ends up in the description. If the context is recoverable, it’s at least not lost forever in the switching.</p>
<p>But these two strategies combine in a strange way, resulting in the <strong>object impermanence of work</strong>: <em>if it’s not in front of me, it doesn’t exist</em>.</p>
<p>I just don’t keep a running inventory of what I was working on or what I did; I know that I can find everything I need to know from the open GitHub issues or PRs. Which then are summarized in stand ups as… <em>stuff</em>.</p>
</section>
<section id="what-did-i-even-do-this-week" class="level2">
<h2 class="anchored" data-anchor-id="what-did-i-even-do-this-week">What did I even do this week?</h2>
<p>It turns out I <em>can</em> answer the question of what I did this week, as long as I’m allowed to run some R code.</p>
<p>Since my entire life is lived on GitHub, I can get a pretty good sense of what I’ve been working on by looking at the PRs and issues I opened and closed in a week. Even better, this information is readily obtained from GitHub with a search like <a href="https://github.com/search?q=author:gadenbuie%20created:%3E2025-01-17T00:00:00Z"><code>author:gadenbuie created:&gt;2025-01-17T00:00:00Z</code></a> or <a href="https://github.com/search?q=author:gadenbuie%20closed:%3E2025-01-17T00:00:00Z"><code>author:gadenbuie closed:&gt;2025-01-17T00:00:00Z</code></a>. And I can create those search queries with R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>author <span class="ot">&lt;-</span> <span class="st">"gadenbuie"</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>date <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>() <span class="sc">-</span> <span class="dv">7</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>search_created <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"author:%s created:&gt;%sT00:00:00Z"</span>, author, date)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>search_closed <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"author:%s closed:&gt;%sT00:00:00Z"</span>, author, date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But of course I don’t want to have to actually click around on GitHub to remember what I was doing. what I want is some rectangular data that I can work on in R.</p>
<p>Enter the <a href="https://gh.r-lib.org"><code>gh</code> package</a>. It’s a package that lets you interact with the GitHub API. We can use <code>gh</code> to run the closed and created search queries and collect all of the results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gh)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>created <span class="ot">&lt;-</span> <span class="fu">gh</span>(<span class="st">"/search/issues"</span>, <span class="at">q =</span> search_created, <span class="at">.limit =</span> <span class="cn">Inf</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>closed <span class="ot">&lt;-</span> <span class="fu">gh</span>(<span class="st">"/search/issues"</span>, <span class="at">q =</span> search_closed, <span class="at">.limit =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Why not do this in one single API request? Unfortunately, GitHub search doesn’t let you use <code>OR</code> for <code>created:</code> and <code>closed:</code> in the same query, but that’s okay, we can put the results together ourselves. Each result has an <code>$items</code> field that contains a list of issues/pull requests, each with a whole bunch of fields. I’ll use <code>purrr</code> to map over the issues and extract the fields I care about.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>work_data <span class="ot">&lt;-</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(created<span class="sc">$</span>items, closed<span class="sc">$</span>items) <span class="sc">|&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(issue) {</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tibble</span>(</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">repository =</span> <span class="fu">sub</span>(<span class="st">"https://api.github.com/repos/"</span>, <span class="st">""</span>, issue<span class="sc">$</span>repository_url),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> issue<span class="sc">$</span>title,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">created_at =</span> issue<span class="sc">$</span>created_at,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">closed_at =</span> issue<span class="sc">$</span>closed_at,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> issue<span class="sc">$</span>html_url,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">state =</span> issue<span class="sc">$</span>state,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">is_issue =</span> <span class="fu">is.null</span>(issue<span class="sc">$</span>pull_request),</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">body =</span> issue<span class="sc">$</span>body</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">|&gt;</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_rbind</span>()</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>work_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 83 × 8
   repository              title created_at url   state is_issue body  closed_at
   &lt;chr&gt;                   &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt;    &lt;chr&gt; &lt;chr&gt;    
 1 r-lib/systemfonts       Repo… 2025-01-2… http… open  TRUE     "A s… &lt;NA&gt;     
 2 rstudio/shiny           fix(… 2025-01-2… http… open  FALSE    "Thi… &lt;NA&gt;     
 3 rstudio/chromote        v0.4… 2025-01-2… http… open  FALSE    "For… &lt;NA&gt;     
 4 rstudio/chromote        Rele… 2025-01-2… http… open  TRUE     "Pre… &lt;NA&gt;     
 5 quarto-ext/bluesky-com… refa… 2025-01-2… http… open  FALSE    "Fix… &lt;NA&gt;     
 6 quarto-ext/bluesky-com… Add … 2025-01-2… http… open  TRUE     "The… &lt;NA&gt;     
 7 rstudio/bslib           Bran… 2025-01-2… http… clos… FALSE    "Fix… 2025-01-…
 8 rstudio/bslib           chor… 2025-01-2… http… clos… FALSE    "Mov… 2025-01-…
 9 rstudio/bslib           Bran… 2025-01-2… http… clos… TRUE     "The… 2025-01-…
10 quarto-dev/quarto-cli   All … 2025-01-2… http… open  TRUE     "###… &lt;NA&gt;     
# ℹ 73 more rows</code></pre>
</div>
</div>
<p>Now that I have a nice rectangular summary of my work over the last week, I’ll organize it a bit to differentiate between my Posit/Shiny work and my personal open-source projects. I’ll also add an <code>action</code> column indicating the primary action this week.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>work_data <span class="ot">&lt;-</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  work_data <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">personal =</span> <span class="fu">grepl</span>(<span class="st">"(^gadenbuie)|bluesky-comments"</span>, repository),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">action_at =</span> <span class="fu">coalesce</span>(closed_at, created_at),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">action =</span> <span class="fu">recode</span>(state, <span class="at">open =</span> <span class="st">"opened"</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">action =</span> <span class="fu">paste</span>(action, <span class="fu">if_else</span>(is_issue, <span class="st">"an issue"</span>, <span class="st">"a PR"</span>)),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(personal, repository, is_issue, action_at)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview the work data</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>work_data <span class="sc">|&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(repository, action, action_at, title)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 83 × 4
   repository                  action          action_at            title       
   &lt;chr&gt;                       &lt;chr&gt;           &lt;chr&gt;                &lt;chr&gt;       
 1 posit-dev/air               opened an issue 2025-01-17T19:11:42Z Try to brea…
 2 posit-dev/air               opened an issue 2025-01-17T20:11:24Z Empty or sh…
 3 posit-dev/air               closed an issue 2025-01-21T19:56:11Z Selectively…
 4 posit-dev/air               closed an issue 2025-01-21T19:56:11Z Selectively…
 5 posit-dev/brand-yml         closed a PR     2025-01-21T17:32:35Z docs: Add g…
 6 posit-dev/brand-yml         closed a PR     2025-01-21T17:32:35Z docs: Add g…
 7 posit-dev/brand-yml         closed a PR     2025-01-21T19:58:30Z docs: Use G…
 8 posit-dev/brand-yml         closed a PR     2025-01-21T19:58:30Z docs: Use G…
 9 posit-dev/py-shiny          opened an issue 2025-01-21T16:25:43Z `render.Dat…
10 posit-dev/py-shiny-validate closed a PR     2025-01-22T17:28:32Z fix: Disabl…
# ℹ 73 more rows</code></pre>
</div>
</div>
<p>Rectangular data FTW! This is great, I have a nice table of all the things I’ve done this week. But it’s still a bit hard to read to make sense of it all. We’ve reached the “I did some stuff and it’s in this tibble” stage, which is admittedly a little better than “I did some stuff”.</p>
<p>What I’d love to do is give this to a robot assistant who could read it all for me and <em>they</em> could summarize my week, or at least get me started on a summary. Sounds like a great task for a large language model!</p>
</section>
<section id="hiring-my-executive-robot-assistant" class="level2">
<h2 class="anchored" data-anchor-id="hiring-my-executive-robot-assistant">Hiring my executive robot assistant</h2>
<p>Now we get to the fun part!<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> We’re going to use the newly released <a href="https://ellmer.tidyverse.org">ellmer package</a> to send my work summary to a large language model and ask it to summarize my week.</p>
<p>If you’re following along at home, here’s where you’ll need to pause and get yourself set up. First, install ellmer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ellmer"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Second, you’ll need access to an LLM. The coolest part of ellmer is that it supports a wide range of LLM providers, which are all listed in the <a href="https://ellmer.tidyverse.org/reference/index.html#chatbots">Chatbots reference</a>. To use your favorite LLM, you’ll need to set up an account and get an API key. But once you’ve completed that step, switching between LLMs is as easy as changing out the <code>chat_*()</code> function that you use to start the chat.</p>
<p>For this demo, I’ll use Anthropic with <a href="https://ellmer.tidyverse.org/reference/chat_claude.html"><code>chat_claude()</code></a>. The help page for <code>chat_claude()</code> includes instructions for setting up a developer account, which I’ve already followed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ellmer)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>chat <span class="ot">&lt;-</span> <span class="fu">chat_claude</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you prefer OpenAI’s ChatGPT, you’d use <a href="https://ellmer.tidyverse.org/reference/chat_openai.html"><code>chat_openai()</code></a>, or if you have <a href="https://ollama.com/">ollama</a> running a local model you’d use <a href="https://ellmer.tidyverse.org/reference/chat_ollama.html"><code>chat_ollama()</code></a>.</p>
<p>Once you have a <code>chat</code> object, you can use the <code>$chat()</code> method to talk to the LLM. The answers are streamed back to your R session and the chat is cumulative, so you can keep “talking”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"Say hello three languages."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Here's "hello" in three languages:

1. English: Hello
2. Spanish: Hola
3. French: Bonjour</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"Say goodbye in those same languages."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Here's "goodbye" in those same languages:

1. English: Goodbye
2. Spanish: Adiós
3. French: Au revoir</code></pre>
</div>
</div>
<p>Our final task is to give the LLM all of the information we’ve collected from my GitHub issues and then to convince it to summarize it all in a meaningful way. I can further refine this task into three distinct components:</p>
<ol type="1">
<li><p>Use a <strong>system prompt</strong> to vibe check the LLM. System prompts are a good place to store initial instructions that the LLM uses a sort of “light instruction set”, like a sort of zero-th prompt.</p>
<p>I’ll use the system prompt to convince the LLM that it’s my assistant.</p></li>
<li><p>Turn the work summary into something a little bit more readable that I can send to the LLM as part of the user prompt.</p></li>
<li><p>Write up a user prompt that gets the LLM to do what I want (most of the time).</p></li>
</ol>
<section id="system-prompt" class="level3">
<h3 class="anchored" data-anchor-id="system-prompt">System prompt</h3>
<p>This is the system prompt that I settled on:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>prompt-system.md</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>You are an assistant who keeps track of the work I do each week. Your goal is to</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>faithfully and accurately report the work I do to my boss while making sure that</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>the impact of my work is clearly articulated. You are clear and concise and use</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>direct language, preferring to match the terminology and phrases that I use. You</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>respond directly without any preamble.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>The goal is to try to help the LLM align with the <em>vibe</em> of the task:</p>
<ul>
<li>It needs to summarize my work</li>
<li>Please don’t make things up</li>
<li>None of that “Sure, here’s your summary of…” fluff.</li>
</ul>
</section>
<section id="work-context" class="level3">
<h3 class="anchored" data-anchor-id="work-context">Work context</h3>
<p>The next step is to get the work summary into a format that’s easier for LLMs to work with. There’s a good chance that I could just throw CSV or a JSON of the <code>work_data</code> table at it, but I think I’ll get better answers if I format it like text. Notice that I’ve already grouped projects together and I’ve tried to make sure relevant parts of the work data are close to each other. I’m going off vibes with this, but I expect I’ll get better summaries with a little pre-work than if I’d ask the LLM to make connections at great distance across the text.</p>
<p>For this task, I’ll turn to my favorite string templating package, <a href="https://pkg.garrickadenbuie.com/epoxy">epoxy</a>. I’ve created a template that I’ll apply to each row of <code>work_data</code>:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>prompt-work-summary.md</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="an">engine:</span><span class="co"> epoxy</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>&lt;work-item&gt;</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>Action: {action}</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>Title: {title}</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>Type: {ifelse(personal, 'Personal Work', 'Professional Work')}</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>Link: {url}</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>&lt;work-description&gt;</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>{body}</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>&lt;/work-description&gt;</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>&lt;/work-item&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>I can take <code>work_data</code> and pass it to <code>epoxy::epoxy_use_file()</code> to fill in the templating bits with the values from <code>work_data</code>, one row at a time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(epoxy)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>work_data <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">15</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">epoxy_use_file</span>(<span class="st">"prompt-work-summary.md"</span>, .engine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s an example of a single work summary using the 15th row.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">work-item</span><span class="dt">&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>Action: closed a PR</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>Title: chore: Add `done.` signal when package installation is completed</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>Type: Professional Work</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>Link: https://github.com/posit-dev/shinylive/pull/195</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">work-description</span><span class="dt">&gt;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>In #194 we went back to calling</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>```patch</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>- micropip.install(pkg_name)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>+ micropip.install(req)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>because otherwise we lose information like the requested package version.</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>I thought this broke installation of package extras because it appeared that `micropip.install()` doesn't actually install the packages listed in an extra. </span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>It turns out that extras aren't installed when the main package is already installed. In other words, `micropip.install("shiny[theme]")` will _not install_ `brand_yml` and `libsass` because `shiny` is already installed, but `micropip.install("httpx[socks]")` _will install_ `socksio` along with `httpx` because `httpx` isn't initially installed.</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>So in the end, this PR mostly just adjusts a few comments and improves the UX of the console message. As [pointed out on Discord](https://discord.com/channels/1109483223987277844/1318357786379161731/1318536291750641674) the messages say `Installing {req} ...` and the last message seems to hang. This PR adds `done` to each line when the package install finishes.</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">work-description</span><span class="dt">&gt;</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">work-item</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that I’ve used <code>&lt;work-item&gt;</code> and <code>&lt;work-description&gt;</code> pseudo-tags to give the text a bit of structure.</p>
<p>Now we can put the work summary together into a single text string.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>work_summary <span class="ot">&lt;-</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  work_data <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">epoxy_use_file</span>(<span class="st">"prompt-work-summary.md"</span>, <span class="at">.collapse =</span> <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-user-prompt" class="level3">
<h3 class="anchored" data-anchor-id="the-user-prompt">The user prompt</h3>
<p>The last step is to give the LLM some instructions about what I want it to write. Again, I’ll use a prompt file for this task.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>prompt.md</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>Summarize my work over the last week for a team update in prose.</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>Focus more on pull requests; issues are less important and just provide context.</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>Write in prose with full paragraphs.</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>Focus on the user impact of the work first and secondarily on the internal impact of dev changes.</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>Summarize the work using markdown under two headings:</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>'## Professional Work' and '## Personal Work'.</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>Include direct links to any mentioned pull requests using markdown syntax.</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>Use the first-person and try to sound like me.</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>&lt;work-summary&gt;</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>{{ work_summary }}</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>&lt;/work-summary&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>For this prompt, I’ll use <code>ellmer::interpolate_file()</code>, which works a lot like <code>epoxy_use_file()</code> but comes built-in with ellmer. It reads in a file and interpolates the <code>{ expr }</code> strings, which in this case will inject the <code>work_summary</code> into the prompt.</p>
</section>
</section>
<section id="the-final-result" class="level2">
<h2 class="anchored" data-anchor-id="the-final-result">The final result</h2>
<p>Finally, we’re ready to put it all together and find out if it works!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>chat <span class="ot">&lt;-</span> <span class="fu">chat_claude</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">system_prompt =</span> <span class="fu">readLines</span>(<span class="st">"prompt-system.md"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>work_summarized <span class="ot">&lt;-</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  chat<span class="sc">$</span><span class="fu">chat</span>(<span class="fu">interpolate_file</span>(<span class="st">"prompt.md"</span>), <span class="at">echo=</span><span class="cn">FALSE</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># I'm caching the result so I don't rack up costs while I write this post</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(chat, <span class="st">"chat.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I’ve set <code>echo=FALSE</code> so that I can store the result and show it to you with a big reveal, but by default the response streams right into your console.</p>
<div class="cell">
<p>Sending my whole work summary plus the prompt took about 23,297 tokens and Claude responded with 606 tokens. Using <a href="https://llmpricecheck.com/calculator/">LLM Price Check</a>, 25k input tokens and 500k output tokens, ends up costing about $0.08 per call to <code>claude-3-sonnet</code> or about $0.13 per call to <code>gpt-4o</code>.</p>
</div>
<p>Here’s the final output! ellmer has a really neat feature that you can turn any part of the conversation into markdown with <code>contents_markdown()</code>. I’ve used code like what’s listed below to embed the response here in this post.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">last_turn</span>() <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contents_markdown</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="My Work Summary">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
My Work Summary
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<section id="professional-work" class="level2">
<h2 class="anchored" data-anchor-id="professional-work">Professional Work</h2>
<p>This week I made significant contributions across several projects, focusing on improving user experience and fixing critical issues. I worked extensively with Chrome headless mode updates and format tooling integrations.</p>
<p>In chromote, I added important user-facing improvements including <code>chromote_info()</code> for better debugging support and implemented a user-specific crash dump directory to improve log file organization (<a href="https://github.com/rstudio/chromote/pull/190">#190</a>, <a href="https://github.com/rstudio/chromote/pull/194">#194</a>). These changes help users better understand their Chrome setup and make debugging easier.</p>
<p>For bslib and Shiny, I improved navbar compatibility and fixed several UI issues. The main focus was on making navbar colors work consistently across Bootstrap 5 and light/dark modes (<a href="https://github.com/rstudio/bslib/pull/1145">#1145</a>). I also fixed a bug with tab insertion in Shiny that was causing issues with web components (<a href="https://github.com/rstudio/shiny/pull/4179">#4179</a>).</p>
<p>I contributed to the development of the air code formatter by opening issues to improve line breaking behavior and support for empty or short braced expressions (<a href="https://github.com/posit-dev/air/issues/183">#183</a>, <a href="https://github.com/posit-dev/air/issues/186">#186</a>). I also helped integrate air formatting into the shiny-workflows repository to standardize code formatting across projects (<a href="https://github.com/rstudio/shiny-workflows/pull/43">#43</a>).</p>
</section>
<section id="personal-work" class="level2">
<h2 class="anchored" data-anchor-id="personal-work">Personal Work</h2>
<p>I made substantial improvements to the bluesky-comments Quarto extension:</p>
<ul>
<li>Enhanced the content labeling system to be more user-friendly and match Bluesky’s native behavior (<a href="https://github.com/quarto-ext/bluesky-comments/pull/29">#29</a>)</li>
<li>Added support for displaying images and GIFs in comments (<a href="https://github.com/quarto-ext/bluesky-comments/pull/40">#40</a>)</li>
<li>Implemented configurable comment thread depth with a show/hide interface (<a href="https://github.com/quarto-ext/bluesky-comments/pull/41">#41</a>)</li>
<li>Started a CSS refactor to improve maintainability and avoid class name conflicts (<a href="https://github.com/quarto-ext/bluesky-comments/pull/45">#45</a>)</li>
</ul>
<p>I also improved shrtcts by adding <code>shortcut_run()</code> and <code>shortcut_get()</code> functions to make it easier to use shortcuts programmatically (<a href="https://github.com/gadenbuie/shrtcts/pull/26">#26</a>).</p>
</section>
</div>
</div>
</div>
<style>
.callout h2 {
  margin-top: inherit;
}
</style>
<p>I have to admit, that’s not a bad summary of my week!</p>
<p>What’s cool about this approach is that I could continue to chat with Claude about my week, asking follow up questions to have it further remind me about what I did.</p>
<p>Another idea I have now is to run this script in a weekly cron job, just before our larger team meeting, to make sure that I know what I did this week when I get there. Not only that, but this would make a great running summary that might come in handy for a performance review or promotion request.</p>
</section>
<section id="using-local-llms" class="level2">
<h2 class="anchored" data-anchor-id="using-local-llms">Using local LLMS</h2>
<p>Just to prove that it’s easy to switch models, I’m going to repeat the above process with a local model. This is the same code as above, but this time using <a href="https://ollama.com/">ollama</a> running <code>llama3.1:8b</code> locally.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>chat_llama <span class="ot">&lt;-</span> <span class="fu">chat_ollama</span>(</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">system_prompt =</span> <span class="fu">readLines</span>(<span class="st">"prompt-system.md"</span>),</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">model =</span> <span class="st">"llama3.1:8b"</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>work_summarized_llama <span class="ot">&lt;-</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  chat_llama<span class="sc">$</span><span class="fu">chat</span>(</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">interpolate_file</span>(<span class="st">"prompt.md"</span>),</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">echo=</span><span class="cn">FALSE</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="My Work Summary (llama3.1:8b)">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
My Work Summary (llama3.1:8b)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>It seems like you have a collection of work items related to a Quarto extension for Bluesky comments. I’ll summarize the issues and tasks into three categories: Documentation, Functionality, and CSS/Design.</p>
<p><strong>Documentation</strong></p>
<ul>
<li>Issue 14: Add text about showing attached images in posts</li>
<li>Issue 35: Correct documentation to reflect that an at-uri is not required</li>
</ul>
<p><strong>Functionality</strong></p>
<ul>
<li>Issue 1: Make comments header a shortcode with customizable section name (instead of being added automatically)</li>
<li>Issues 15 and 44: Limit nested comment levels and add an option for comments from YAML front matter</li>
<li>Issue 14 (again): Show attached images in the post as small thumbnails with lightbox treatment</li>
</ul>
<p><strong>CSS/Design</strong></p>
<ul>
<li>Issue 43: Take a quick pass at CSS to ensure class names work well, top-level classes have <code>bc-</code> prefix, and other best practices.</li>
</ul>
<p>Please confirm if this summary is correct.</p>
</div>
</div>
</div>
<p>The local model is quite a bit slower, but I can run it on my M3 MacBook Air. The summarization quality is no where near what I got from Claude, either, but I didn’t need to pay for the query or send my data to a third-party. At the very least, the local model is a great way to practice setting up the pipeline before I’m ready to pay for queries with Anthropic or others.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>I know what you’re thinking and you’re totally right. The <strong>fun part</strong> was getting all this data in a nice tidy tibble! Think of all the things we could do with that tibble. But dplyr isn’t the new hotness and this blog needs to meet its buzz word quota, so we’re forced to do something extra.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.garrickadenbuie\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="gadenbuie/garrickadenbuie-com" data-repo-id="MDEwOlJlcG9zaXRvcnkxMjE5NjYxNzQ=" data-category="Comments" data-category-id="DIC_kwDOB0UOXs4CAIFZ" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025 Garrick Aden-Buie</p>
</div>   
    <div class="nav-footer-center">
<p><a class="link-dark" href="https://bsky.app/profile/grrrck.xyz" title="bluesky" target="_blank" rel="noopener"><i class="fa-brands fa-bluesky" aria-label="bluesky"></i></a> <a class="link-dark" href="https://fosstodon.org/@grrrck" title="mastodon" target="_blank" rel="noopener"><i class="fa-brands fa-mastodon" aria-label="mastodon"></i></a> <a class="link-dark" href="https://github.com/gadenbuie" title="github" target="_blank" rel="noopener"><i class="fa-brands fa-github" aria-label="github"></i></a> <a class="link-dark" href="https://gadenbuie.r-universe.dev" title="r-project" target="_blank" rel="noopener"><i class="fa-brands fa-r-project" aria-label="r-project"></i></a> <a class="link-dark" href="https://keybase.io/grrrck" title="keybase" target="_blank" rel="noopener"><i class="fa-brands fa-keybase" aria-label="keybase"></i></a> <a class="link-dark" href="https://garrickadenbuie.bandcamp.com" title="bandcamp" target="_blank" rel="noopener"><i class="fa-brands fa-bandcamp" aria-label="bandcamp"></i></a> <a class="link-dark" href="http://orcid.org/0000-0002-7111-0077" title="orcid" target="_blank" rel="noopener"><i class="ai  ai-orcid" title="" style="color:"></i></a></p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/gadenbuie/garrickadenbuie-com/blob/main/blog/llm-work-summary/index.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/gadenbuie/garrickadenbuie-com/edit/main/blog/llm-work-summary/index.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/gadenbuie/garrickadenbuie-com/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p><a class="link-dark me-1" href="../../colophon">Made with 💙</a> <a class="link-dark" href="../../blog/index.xml" title="RSS feed"><i class="bi bi-rss-fill"><span class="visually-hidden">RSS feed</span></i></a></p>
</div>
  </div>
</footer>




</body></html>